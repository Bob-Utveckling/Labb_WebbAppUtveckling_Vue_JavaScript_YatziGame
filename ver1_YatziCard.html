
<html>
    <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <link rel="stylesheet" href="./css/style2.css">
        </head>
    <body>

    </body>
</html>

<script src = "./js/PlayerCardTemplate.js"></script>
<script>
    arrUserDices = [2,3,2,3,1];
    //temporary. set instead of from Vuex store:
    arrPlayersObj = [{"name":"Bamshad"}, {"name":"Igal"}]; //temp
    //temporary also. have from Vuex:
    arrPlayerCards = []; arrPlayerCards[0] = defaultCardTemplate; arrPlayerCards[1] = defaultCardTemplate;
</script>

<script src = "./js/MatchCats.js"></script>


<html>
    <div id="AllCards"></div>
    <!-- <div id="div1">Div 1</div> -->
    <!-- <div id="player1_ettor">Fill cat detail</div> -->

</html>


<script>
    var style = document.createElement('style');
</script>
<script>

    function addCardField(strCurrentDivId,
                            numPlayerId, strCatField,
                            strFieldContent) {
        newDivId = "player" + numPlayerId + "_" + strCatField;
        style.innerHTML +=
            "#" + newDivId + " {" +
            "width: 100px; height: 50px; border: 1px  solid orange;" +
            "} " ;    
        // Get the first script tag
        var ref = document.querySelector('script');
        
        // Insert the new style before the first script tag
        ref.parentNode.insertBefore(style, ref);
    
        newDiv = document.createElement('div');
        newDiv.setAttribute("id", newDivId);
        newDiv.innerHTML = strFieldContent;  

        currentDiv = document.getElementById(strCurrentDivId);
        document.body.insertBefore(newDiv, currentDiv.nextSibling);
    }


    function prepareOnePlayerCard(tempStartDiv, thisPlayerId, thisPlayerCard) {
        console.log("preparing one player card given: " + thisPlayerId + " and " + thisPlayerCard);
        currentDivId = tempStartDiv;
        //arrRuleNameRegistry is from RuleChecks.js file:
        for (ruleNameCount = 0; ruleNameCount < arrRuleNameRegistry.length; ruleNameCount++) {
            console.log("field for " + arrRuleNameRegistry[ruleNameCount]);
            catField = arrRuleNameRegistry[ruleNameCount]; //"ettor";
            // if (catField == )
            fieldContent = thisPlayerCard.categories[ruleNameCount].catName +
                                    "[] [] [] etc.";
            addCardField(currentDivId, thisPlayerId, catField, fieldContent);
            
            currentDivId = "player" + thisPlayerId + "_" + catField; //update as current    
        }
    }
    

    /*newDiv.addEventListener("click", function() {
            alert("fill cat function");
        });


        alert(sumOfDices);
        */

    function setPlaceForAllCards (arrPlayersObj) {
        divPlaceHolder = document.getElementById("AllCards");
        
        for (divCount=0; divCount < arrPlayersObj.length; divCount++) {
            newCardDiv = document.createElement('div');
            cardId = "card" + divCount;
            newCardDiv.setAttribute("id", cardId);
            newCardDiv.style ="border: 2px solid orange; display:inline-block;"
            newCardDiv.innerHTML = "id: " + cardId;  
            divPlaceHolder.appendChild(newCardDiv);
        }
    }

    
    function putEachCardInPlace () {
        for (playerIdCount = 0; playerIdCount < arrPlayersObj.length; playerIdCount++ ) {                        
            var cardId = "card" + playerIdCount;
            var card = document.getElementById(cardId);
            //alert(cardId);
            tempStartDiv = cardId + "div1";
            newContent = "<br><be>CONTENT OF EACH CARD " + cardId + 
                "<br>" +
                "<div id='" + tempStartDiv + "'> temp start div id:" + tempStartDiv + "</div>";
            // card.appendChild(newContent);
            card.innerHTML += newContent;

            prepareOnePlayerCard(tempStartDiv, playerIdCount, arrPlayerCards[playerIdCount]);
        }
    }


    setPlaceForAllCards(arrPlayersObj);
    putEachCardInPlace();


/*
    card0 = document.getElementById("card1");
    card0.innerHTML = "has a div that can place content at";
    
    placeThis = document.createElement('div');
    placeThis.setAttribute("id", "testDiv");
    placeThis.style ="border: 2px solid orange; display:inline-block;"
    placeThis.innerHTML = "test content";  
    card0.appendChild(placeThis);
*/
    //document.body.insertBefore(newDiv, currentDiv.nextSibling);

</script>
        

